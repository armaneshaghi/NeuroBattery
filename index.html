<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="NeuroBattery : Smashing through the boundaries - of current neuroimage analysis limitations" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>NeuroBattery</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jeffduda/NeuroBattery">View on GitHub</a>

          <h1 id="project_title">NeuroBattery</h1>
          <h2 id="project_tagline">Smashing through the boundaries - of current neuroimage analysis limitations</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jeffduda/NeuroBattery/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jeffduda/NeuroBattery/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="neurobattery" class="anchor" href="#neurobattery"><span class="octicon octicon-link"></span></a>NeuroBattery</h1>

<p>Here we provide a working example that illustrates the use of Advanced Normalization Tools (<a href="https://github.com/stnava/ANTs">ANTs</a>) to process multiple MR image types for a single subject. We provide and example input data for a single subject for which a battery of 5 different images were acquired in a single scanning session: </p>

<ol>
<li>T1 (MPRAGE)</li>
<li>pseudo continuous arterial spin labeling (PCASL)</li>
<li>diffusion weighted/tensor</li>
<li>magnetization transfer</li>
<li>resting state BOLD</li>
</ol><p>Additionally we provide a template and associated labels &amp; priors that we use as an anatomical basis for processing as well as a set of verified output image to ensure that your version is working correctly. The general concept is to use the anatomical information in the T1 images as a spatial frame-of-refenece. Accoringly we find a spatial mapping between each subject's T1 image and the T1 template. Later, for additional MR images, we will perform intrasubject alignment to the T1 allowing for mapping to template space by composing multiple transforms and retaining the concept of relying on the T1 images for anatomical referenence for both intra and inter subject exploration of the data. After aligning the T1 image to the template we generate various images relating to anatomical properties of the brain. </p>

<h2>
<a name="t1-mprage-image-processing" class="anchor" href="#t1-mprage-image-processing"><span class="octicon octicon-link"></span></a>T1 (MPRAGE) image processing</h2>

<p>A template image along with associated tissue-type priors serves as the reference for a registration-based approach to processing of the T1 subject data. Below are some example illustrations of the included template (<code>data/template/T_template.nii.gz</code>).</p>

<p><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_axial.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_sagittal.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_coronal.png?raw=true" alt="Full C"></p>

<p>A brainmask of the template will help extract the brain from the input (<code>data/template/T_templateProbabilityMask.nii.gz</code>)</p>

<p><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_mask_axial.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_mask_sagittal.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_mask_coronal.png?raw=true" alt="Full C"></p>

<p>And tissue priors in the template will help segment the input data. Red=CSF, Green=Cortex, Blue=White matter, and Yellow=Deep gray matter (<code>data/template/Priors/priors%d.nii.gz</code>)</p>

<p><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_prior_axial.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_prior_sagittal.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/template_t1_prior_coronal.png?raw=true" alt="Full C"></p>

<p>These images, along with subject T1 data are used to generate a number of useful outputs, including:</p>

<ol>
<li>Bias corrected version of input image via N4</li>
<li>Brain extraction mask (cerebrum)</li>
<li>4-tissue segmentation (CSF,white matter, cortex, and deep gray matter)</li>
<li>Cortical thickness</li>
<li>Spatial transform to template space (and inverse transform)</li>
</ol><p>In the script directory, <code>process_t1.sh</code> provides an example call to <code>antsCorticalThickness.sh</code> which is used to achieve the steps listed above. The full command is:</p>

<blockquote>
<p>sh  antsCorticalThickness.sh -d 3 \<br>
   -a ../data/input/PEDS012/20121031/Anatomy/PEDS012_20121031_mprage_t1.nii.gz \<br>
   -e ../data/template/T_template.nii.gz \<br>
   -m ../data/template/T_templateProbabilityMask.nii.gz \<br>
   -p ../data/template/Priors/priors%d.nii.gz \<br>
   -t ../data/template/T_template.nii.gz \<br>
   -k 1 \<br>
   -n 3 \<br>
   -w 0.25 \<br>
   -o ../data/output/PEDS012/20121031/PEDS012_20121031_ </p>
</blockquote>

<p>Here are some sample slices from the provided T1 input data (<code>data/input/PEDS012/20121031/Anatomy/PEDS012_20121031_mprage_t1.nii.gz</code>) followed by the results provided by <code>antsCorticalThickness.sh</code>.</p>

<p><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1_axial.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1_sagittal.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1_coronal.png?raw=true" alt="Full C"></p>

<p>The exctracted cerebrum image:</p>

<p><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1brain_axial.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1brain_sagittal.png?raw=true" alt="Full C"><img src="https://github.com/jeffduda/NeuroBattery/blob/master/figures/input_t1brain_coronal.png?raw=true" alt="Full C"></p>

<p>Having processed the T1 image, we want to continue to use this data as our anatomical frame-of-reference. The processing of the additional data will all follow a similar pattern:</p>

<ol>
<li>Initial preprocessing to obtain a derived scalar image with relevant anatomical detail</li>
<li>Alignment of the derived scalar to the T1 data</li>
<li>Propogation of relevant labels, such as the brain mask, etc.</li>
<li>Quantification of modality specific metrics of interest.</li>
</ol><h2>
<a name="diffusion-weighted-image-processing" class="anchor" href="#diffusion-weighted-image-processing"><span class="octicon octicon-link"></span></a>Diffusion weighted image processing</h2>

<h2>
<a name="pseudo-continuous-arterial-spin-labeling-pcasl-image-processing" class="anchor" href="#pseudo-continuous-arterial-spin-labeling-pcasl-image-processing"><span class="octicon octicon-link"></span></a>Pseudo continuous arterial spin labeling (PCASL) image processing</h2>

<h2>
<a name="resting-bold-fmri-processing" class="anchor" href="#resting-bold-fmri-processing"><span class="octicon octicon-link"></span></a>Resting BOLD fMRI processing</h2>

<h2>
<a name="magnetization-transfer-processing" class="anchor" href="#magnetization-transfer-processing"><span class="octicon octicon-link"></span></a>Magnetization transfer processing</h2>

<p><strong>Whipping up a fury, Dominating flurry</strong></p>

<p><strong>We create the Battery</strong></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">NeuroBattery maintained by <a href="https://github.com/jeffduda">jeffduda</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
